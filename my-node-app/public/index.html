<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>หน้าหลัก - จองหนังสือ</title>
    <link rel="stylesheet" href="styles.css">
    <script src="detail\script.js" defer></script>
</head>
<body>
    <div class="container">
        <h1>รายการหนังสือ</h1>
        <div class="book-grid">
            <div class="book-card" id="book1">
                <img src="image\book1.jpg" alt="Book1" class="book-cover">
                <div class="book-info">
                    <h2>ชื่อหนังสือ</h2>
                    <p id="status-book1">สถานะการจอง: ว่าง</p>
                    <a href="detail\book-detail1.html" class="detail-button" id="reserve-button-book1">ดูรายละเอียด</a>
                </div>
            </div>
            <div class="book-card">
                <img src="image\book2.jpg" alt="Book2" class="book-cover"> 
                <div class="book-info">
                    <h2>ชื่อหนังสือ</h2>
                    <p id="status-book1">สถานะการจอง: ว่าง</p> 
                    <a href="detail\book-detail2.html" class="detail-button" id="reserve-button-book1">ดูรายละเอียด</a>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
          fetch('/book-status/1') // ตรวจสอบสถานะหนังสือ id = 1
            .then(response => response.json())
            .then(data => {
              document.getElementById('status-book1').innerText = 'สถานะการจอง: ' + data.status;
              if (data.status === 'จองแล้ว') {
                document.getElementById('reserve-button-book1').disabled = true; // ปิดการจองถ้าหนังสือถูกจองแล้ว
              }
            })
            .catch(error => console.error('Error fetching book status:', error));
        });
      </script>
</body>
</html>
